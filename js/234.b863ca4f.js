"use strict";(self["webpackChunkstretch_ui"]=self["webpackChunkstretch_ui"]||[]).push([[234],{29378:(e,o,n)=>{n.d(o,{_7:()=>s,Cw:()=>r,Ws:()=>a,bW:()=>c,Qu:()=>i,Do:()=>l,W7:()=>m,TP:()=>p,uH:()=>_,sc:()=>w,TW:()=>f,hb:()=>S,Fw:()=>h,cf:()=>T});n(8858);var t=n(61959);const s=(0,t.qj)({ros:new ROSLIB.Ros,connected:!1});function r(e){s.ros.connect(e),s.ros.on("connection",(()=>{s.connected=!0,console.log("ROS Connected!")})),s.ros.on("error",(e=>{console.log("Error connecting to websocket server: ",e)})),s.ros.on("close",(()=>{s.connected=!1,console.log("Connection to websocket server closed.")}))}const a=()=>{s.ros.close(),s.connected=!1};function c(e,o){return new ROSLIB.Topic({ros:s.ros,name:e,messageType:o})}const i=(0,t.qj)({jointState:null,stateTopic:new ROSLIB.Topic({ros:s.ros,name:"/state_machine/smach/container_status",messageType:"smach_msgs/SmachContainerStatus"}),jointStateTopic:new ROSLIB.Topic({ros:s.ros,name:"/stretch/joint_states/",messageType:"sensor_msgs/JointState"}),orderTopic:new ROSLIB.Topic({ros:s.ros,name:"/sp_sm/post_orders",messageType:"std_msgs/Int16MultiArray"}),cmdVelTopic:new ROSLIB.Topic({ros:s.ros,name:"/stretch/cmd_vel",messageType:"geometry_msgs/Twist"}),calibrateClient:new ROSLIB.Service({ros:s.ros,name:"/calibrate_the_robot",serviceType:"std_srvs/Trigger"}),magnetClient:new ROSLIB.Service({ros:s.ros,name:"/magnet_toggle",serviceType:"std_srvs/Trigger"}),startClient:new ROSLIB.Service({ros:s.ros,name:"/sp_sm/start",serviceType:"std_srvs/Trigger"}),clearClient:new ROSLIB.Service({ros:s.ros,name:"/sp_sm/clear_orders",serviceType:"std_srvs/Trigger"}),switchToNavClient:new ROSLIB.Service({ros:s.ros,name:"/switch_to_navigation_mode",serviceType:"std_srvs/Trigger"}),switchToPosClient:new ROSLIB.Service({ros:s.ros,name:"/switch_to_position_mode",serviceType:"std_srvs/Trigger"}),runstopClient:new ROSLIB.Service({ros:s.ros,name:"/runstop",serviceType:"std_srvs/SetBool"}),trajectoryClient:new ROSLIB.ActionClient({ros:s.ros,serverName:"/stretch_controller/follow_joint_trajectory",actionName:"control_msgs/FollowJointTrajectoryAction"})});function l(e){var o=new ROSLIB.ServiceRequest({data:e});i.runstopClient.callService(o,(function(e){console.log("Result for service call on "+i.runstopClient.name+": "+e.success+" - "+e.message)}))}function u(e){var o=new ROSLIB.ServiceRequest({});e.callService(o,(function(o){console.log("Result for service call on "+e.name+": "+o.success+" - "+o.message)}))}function m(e){var o=new ROSLIB.Service({ros:s.ros,name:e,serviceType:"std_srvs/Empty"});u(o)}function p(e){var o=new ROSLIB.Service({ros:s.ros,name:e,serviceType:"std_srvs/Trigger"});u(o)}function d(e){var o="{";for(var n in e)o=o+String(n)+":"+String(e[n])+", ";o+="}",console.log("generatePoseGoal( "+o+" )");var t=[],s=[];for(var n in e)t.push(n),s.push(e[n]);var r=new ROSLIB.Goal({actionClient:i.trajectoryClient,goalMessage:{trajectory:{header:{stamp:{secs:0,nsecs:0}},joint_names:t,points:[{positions:s,time_from_start:{secs:0,nsecs:1}}]}}});return console.log("newGoal created ="+r),r.on("feedback",(function(e){console.log("Feedback: "+e.sequence)})),r.on("result",(function(e){console.log("Final Result: "+e.sequence)})),r}function g(e,o){var n=e.name.indexOf(o);return e.position[n]}function v(e){return g(i.jointState,e)}function _(e){console.log("sending baseTranslate command");var o=d({translate_mobile_base:e});o.send()}function w(e){console.log("sending baseTurn command");var o=d({rotate_mobile_base:3.14*e/180});o.send()}function f(e){e?d({gripper_aperture:0}).send():d({gripper_aperture:.125}).send()}function b(e,o){if(console.log("sendIncrementalMove start: jointName ="+e),null!==i.jointState){var n=v(e);console.log(n),n+=o,console.log("poseGoal call: jointName ="+e);var t={[e]:n},s=d(t);return s.send(),!0}return!1}function S(e){console.log("attempting to sendarmMove command"),b("wrist_extension",e)}function h(e){console.log("attempting to sendliftMove command"),b("joint_lift",e)}function T(e){console.log("attempting to send wristMove command"),b("joint_wrist_yaw",3.14*e/180)}i.jointStateTopic.subscribe((function(e){null===i.jointState&&console.log("Received first joint state from ROS"),i.jointState=e}))},29234:(e,o,n)=>{n.r(o),n.d(o,{default:()=>P});var t=n(83673);function s(e,o,n,s,r,a){const c=(0,t.up)("q-btn"),i=(0,t.up)("q-input");return(0,t.wg)(),(0,t.j4)(i,{dark:"",standout:"",dense:"",modelValue:s.ws_address,"onUpdate:modelValue":o[0]||(o[0]=e=>s.ws_address=e),label:"ROS Connection"},{append:(0,t.w5)((()=>[s.rosConnection.connected?((0,t.wg)(),(0,t.j4)(c,{key:0,class:"cursor-pointer",onClick:s.rosDisconnect,round:"",dense:"",flat:"",color:"positive",icon:"link"},null,8,["onClick"])):((0,t.wg)(),(0,t.j4)(c,{key:1,class:"cursor-pointer",onClick:s.connect,round:"",dense:"",flat:"",color:"red",icon:"link_off"}))])),_:1},8,["modelValue"])}var r=n(61959),a=n(29378);const c={setup(e,{expose:o}){o();const n=(0,r.iH)("ws://192.168.0.186:9090"),s=()=>{(0,a.Cw)(n.value)};(0,t.bv)((()=>{s()}));const c={ws_address:n,connect:s,ref:r.iH,onMounted:t.bv,rosConnect:a.Cw,rosDisconnect:a.Ws,rosConnection:a._7,rosInterface:a.Qu};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}};var i=n(74260),l=n(61206),u=n(48240),m=n(7518),p=n.n(m);const d=(0,i.Z)(c,[["render",s]]),g=d;p()(c,"components",{QInput:l.Z,QBtn:u.Z});n(62323);var v=n(79582);const _={setup(e,{expose:o}){o();const n=(0,v.yj)(),s=(0,v.tv)(),a=[{icon:"home",label:"Home",pathName:"home.main",separator:!1},{icon:"gamepad",label:"Controller",pathName:"home.controller",separator:!1}],c={route:n,router:s,menuList:a,useRoute:v.yj,useRouter:v.tv,ref:r.iH,watch:t.YP,onMounted:t.bv};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}};var w=n(83414),f=n(52035),b=n(24554),S=n(46489);function h(e,o,n,s,r,a){const c=(0,t.up)("q-route-tab"),i=(0,t.up)("q-tabs");return(0,t.wg)(),(0,t.j4)(i,{class:"bg-primary text-white shadow-2 rounded-borders fit","no-caps":"",dense:"",shrink:"",modelValue:s.tab,"onUpdate:modelValue":o[0]||(o[0]=e=>s.tab=e),"inline-label":"","narrow-indicator":"","indicator-color":"white",align:"justify"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(n.tabContent,((e,o)=>((0,t.wg)(),(0,t.j4)(c,{key:o,to:{name:e.pathName},icon:e.icon,label:e.label,name:e.label},null,8,["to","icon","label","name"])))),128))])),_:1},8,["modelValue"])}p()(_,"components",{QItem:w.Z,QItemSection:f.Z,QIcon:b.Z}),p()(_,"directives",{Ripple:S.Z});const T={props:["tabContent"],setup(e,{expose:o}){o();const n=e,t=(0,r.iH)("Home"),s={props:n,tab:t,ref:r.iH};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}};var y=n(52496),j=n(42770);const R=(0,i.Z)(T,[["render",h]]),C=R;p()(T,"components",{QTabs:y.Z,QRouteTab:j.Z});const I=(0,t.Uk)("Stretch Interface"),O={setup(e){const o=[{icon:"home",label:"Home",pathName:"home.main",separator:!1},{icon:"gamepad",label:"Controller",pathName:"home.controller",separator:!1},{icon:"science",label:"Experiment",pathName:"home.experiment",separator:!1}];return(e,n)=>{const s=(0,t.up)("q-icon"),r=(0,t.up)("q-toolbar-title"),a=(0,t.up)("q-space"),c=(0,t.up)("q-toolbar"),i=(0,t.up)("q-header"),l=(0,t.up)("q-footer"),u=(0,t.up)("router-view"),m=(0,t.up)("q-page-container"),p=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.j4)(p,{view:"hHh lpR fFf"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{elevated:"",class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{class:"bg-primary text-white rounded-borders"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"smart_toy",class:"text-white",size:"lg"}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[I])),_:1}),(0,t.Wm)(a),(0,t.Wm)(g)])),_:1})])),_:1}),(0,t.Wm)(l,{class:"bg-transparent flex-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{class:"flex-center q-mb-md rounded-borders"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{"tab-content":o})])),_:1})])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u)])),_:1})])),_:1})}}};var B=n(19214),L=n(53812),Z=n(39570),Q=n(13747),k=n(62025),q=n(41762),W=n(52901),x=n(47704),H=n(27011),N=n(72652);const M=O,P=M;p()(O,"components",{QLayout:B.Z,QHeader:L.Z,QToolbar:Z.Z,QBtn:u.Z,QIcon:b.Z,QToolbarTitle:Q.Z,QSpace:k.Z,QFooter:q.Z,QDrawer:W.Z,QScrollArea:x.Z,QList:H.Z,QPageContainer:N.Z})}}]);